<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mouse Parallax City</title>
	<style>
		html, body {
			width: 100vw;
			height: 100vh;
			margin: 0;
			padding: 0;
			overflow: hidden;
			background: #111;
		}
		body {
			width: 100vw;
			height: 100vh;
			position: relative;
			font-family: sans-serif;
		}
		.parallax-layer {
			position: absolute;
			top: -10vh; 
            left: -5vw;
			width: 110vw;
			height: 110vh;
			background-repeat: no-repeat;
	        background-size: 100% 100%;
	        background-position: center;
	        image-rendering: auto;
	        filter: none;
			will-change: transform;
			transition: transform 0.35s cubic-bezier(.4,.2,.2,1);
			pointer-events: none;
		}
		.content {
			position: absolute;
			z-index: 10;
			left: 0; top: 0;
			width: 100vw;
			height: 100vh;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #fff;
			font-size: 3vw;
			pointer-events: auto;
			text-shadow: 0 2px 8px #000a;
		}
		@media (max-width: 600px) {
			.content { font-size: 5vw; }
		}
	</style>
</head>
<body>
	<div class="parallax-layer" id="layer1" style="background-image: url('resource/city 1/1.png'); z-index:1; top:-5px;"></div>
	<div class="parallax-layer" id="layer2" style="background-image: url('resource/city 1/2.png'); z-index:2; top:-5px;"></div>
	<div class="parallax-layer" id="layer3" style="background-image: url('resource/city 1/3.png'); z-index:3; top:20px;"></div>
	<div class="parallax-layer" id="layer4" style="background-image: url('resource/city 1/4.png'); z-index:4; top:40px;"></div>
	<div class="parallax-layer" id="layer5" style="background-image: url('resource/city 1/5.png'); z-index:5; top:60px;"></div>
	<div class="content">
		<div>
			<h1>Mouse Parallax City</h1>
			<p>Gerakkan mouse untuk melihat efek parallax!</p>
		</div>
	</div>
	<script>
		// Parallax speed factors (background to foreground)
		const speeds = [0.15, 0.3, 0.5, 0.7, 1];
		const layers = [
			document.getElementById('layer1'),
			document.getElementById('layer2'),
			document.getElementById('layer3'),
			document.getElementById('layer4'),
			document.getElementById('layer5')
		];
		let target = { x: 0, y: 0 };
		let current = { x: 0, y: 0 };

		function lerp(a, b, t) { return a + (b - a) * t; }

		function animateParallax() {
			current.x = lerp(current.x, target.x, 0.12);
			current.y = lerp(current.y, target.y, 0.12);
			for (let i = 0; i < layers.length; i++) {
			const moveX = -current.x * speeds[i];
			const moveY = -current.y * speeds[i];
			layers[i].style.transform = `translate(${moveX}px, ${moveY}px)`;
			}
			requestAnimationFrame(animateParallax);
		}

		window.addEventListener('mousemove', e => {
			const w = window.innerWidth;
			const h = window.innerHeight;
			// Centered range: -1 to 1
			const x = (e.clientX / w - 0.5) * 2;
			const y = (e.clientY / h - 0.5) * 2;
		// Max movement in px (lebih kecil agar tidak muncul area kosong di tepi)
		target.x = x * w * 0.045;
		target.y = y * h * 0.045;
		});

		window.addEventListener('touchmove', e => {
			if (e.touches && e.touches.length > 0) {
				const t = e.touches[0];
				const w = window.innerWidth;
				const h = window.innerHeight;
				const x = (t.clientX / w - 0.5) * 2;
				const y = (t.clientY / h - 0.5) * 2;
				target.x = x * w * 0.045;
				target.y = y * h * 0.045;
			}
		}, {passive:true});

		animateParallax();
	</script>
</body>
</html>
